<!DOCTYPE html>
<html>
    <head>
        <title>Exercise 1.3.3</title>
        <link href="../../../reset.css" rel="stylesheet">
        <link href="../../../page.css" rel="stylesheet">
    </head>
    <body>
        <div class="frame">        
            <h2>Reflecting on the changes we made</h2>
            <p>
                Being able to change the properties of an object is a powerful and
                useful concept.   
            </p>
            <p>
                But in this particular case, we could have taken a different approach.
                Instead of <b>changing</b> the property values of the year object, we could have created 
                a <b>new object</b> that had the changed values.  For example, our
                <b>adjustYear</b> function could have been instead a <b>calculateNextYear</b>
                function which would return a new year object instead of changing the
                <b>year</b> object it was given:
            </p>
            <div class="code">
function <span class="highlight">calculateNextYear</span>(year, change) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;return {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade6: year.grade6 + change.grade6,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade7: year.grade7 + change.grade7,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade8: year.grade8 + change.grade8,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade9: year.grade9 + change.grade9,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade10: year.grade10 + change.grade10,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade11: year.grade11 + change.grade11,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade12: year.grade12 + change.grade12<br>
&nbsp;&nbsp;&nbsp;&nbsp;};<br>
}<br>
            </div>
            <p>
                We could have used the function <b>calculateNextYear</b> as follows to calculate
                a new year object from the existing year object.
            </p>
            <p>
                Either approach (<b>adjustYear</b> or <b>calculateNextYear</b>) works in this case.
            </p>
            <div class="code hover">
                <p class="hover">Move your mouse here to compare the approaches</p>
function calculateAverageStudents() {<br>
&nbsp;&nbsp;&nbsp;&nbsp;var year = {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade6: 66,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade7: 74,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade8: 74,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade9: 82,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade10: 81,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade11: 79,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade12: 76<br>
&nbsp;&nbsp;&nbsp;&nbsp;};<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;var change = {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade6: -2,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade7: -3,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade8: -1,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade9: 3,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade10: 1,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade11: 2,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grade12: 1<br>
&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="remove">var <span class="highlight">nextYear</span> = calculateNextYear</span></span><span class="add">adjustYear</span>(<span class="add"><span class="highlight">year</span></span><span class="remove">year</span>, change);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var nextYearAverages = calculateAverageStudentsForYear(<span class="remove"><span class="highlight">nextYear</span></span><span class="add"><span class="highlight">year</span></span>);<br>
}<br>
            </div>
            <p>
                If you are in doubt as to whether you should have a function that
                creates a new object or updates an existing object, you should ask
                yourself: 
            </p>
            <p class="idea">
                Do I still need an object that has the property values before
                I updated them?  If so, then creating a new object may
                be a better approach than updating an existing one.
            </p>
            <p>
                In this case, we didn't need the previous values of the <b>year</b>
                object for what we were doing, so it was OK to update the object
                using <b>adjustYear</b>.  If we had needed the <b>year</b> values,
                for example to do other calculations, then we would have to use 
                an approach like <b>calculateNextYear</b>, which does not change
                the value of the <b>year</b> object.
            </p>        
        </div>
    </body>
</html>